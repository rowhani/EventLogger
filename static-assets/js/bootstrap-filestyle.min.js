(function(e){"use strict";var t=function(t,n){this.options=n;this.$elementFilestyle=[];this.$element=e(t)};t.prototype={clear:function(){this.$element.val("");this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val("");this.$elementFilestyle.remove()},disabled:function(e){if(e===true){if(!this.options.disabled){this.$element.attr("disabled","true");this.$elementFilestyle.find("label").attr("disabled","true");this.options.disabled=true}}else if(e===false){if(this.options.disabled){this.$element.removeAttr("disabled");this.$elementFilestyle.find("label").removeAttr("disabled");this.options.disabled=false}}else{return this.options.disabled}},buttonBefore:function(e){if(e===true){if(!this.options.buttonBefore){this.options.buttonBefore=true;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else if(e===false){if(this.options.buttonBefore){this.options.buttonBefore=false;if(this.options.input){this.$elementFilestyle.remove();this.constructor();this.pushNameFiles()}}}else{return this.options.buttonBefore}},icon:function(e){if(e===true){if(!this.options.icon){this.options.icon=true;this.$elementFilestyle.find("label").prepend(this.htmlIcon())}}else if(e===false){if(this.options.icon){this.options.icon=false;this.$elementFilestyle.find("i").remove()}}else{return this.options.icon}},input:function(e){if(e===true){if(!this.options.input){this.options.input=true;if(this.options.buttonBefore){this.$elementFilestyle.append(this.htmlInput())}else{this.$elementFilestyle.prepend(this.htmlInput())}this.$elementFilestyle.find(".quant-files-filestyle").remove();var t="",n=[];if(this.$element[0].files===undefined){n[0]={name:this.$element[0].value}}else{n=this.$element[0].files}for(var r=0;r<n.length;r++){t+=n[r].name.split("\\").pop()+", "}if(t!==""){this.$elementFilestyle.find(":text").val(t.replace(/\, $/g,""))}}}else if(e===false){if(this.options.input){this.options.input=false;this.$elementFilestyle.find(":text").remove();var n=[];if(this.$element[0].files===undefined){n[0]={name:this.$element[0].value}}else{n=this.$element[0].files}if(n.length>0){var i;if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){i='style="background-color: #fff !important; color: 000;"'}else{i='style="background-color: #000 !important; color: fff;"'}this.$elementFilestyle.find("label").append(" <span "+i+' class="quant-files-filestyle badge">'+n.length+"</span>")}}}else{return this.options.input}},buttonText:function(e){if(e!==undefined){this.options.buttonText=e;this.$elementFilestyle.find("label span").html(this.options.buttonText)}else{return this.options.buttonText}},classButton:function(e){if(e!==undefined){this.options.classButton=e;this.$elementFilestyle.find("label").attr({"class":this.options.classButton});if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){this.$elementFilestyle.find("label i").addClass("icon-white")}else{this.$elementFilestyle.find("label i").removeClass("icon-white")}}else{return this.options.classButton}},classIcon:function(e){if(e!==undefined){this.options.classIcon=e;if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){this.$elementFilestyle.find("label").find("i").attr({"class":"icon-white "+this.options.classIcon})}else{this.$elementFilestyle.find("label").find("i").attr({"class":this.options.classIcon})}}else{return this.options.classIcon}},classInput:function(e){if(e!==undefined){this.options.classInput=e;this.$elementFilestyle.find(":text").addClass(this.options.classInput)}else{return this.options.classInput}},htmlIcon:function(){if(this.options.icon){var e="";if(this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){e=" icon-white "}return'<i class="'+e+this.options.classIcon+'"></i> '}else{return""}},htmlInput:function(){if(this.options.input){return'<input type="text" class="'+this.options.classInput+'" disabled> '}else{return""}},pushNameFiles:function(){var e="",t=[];if(this.$element[0].files===undefined){t[0]={name:this.$element.value}}else{t=this.$element[0].files}for(var n=0;n<t.length;n++){e+=t[n].name.split("\\").pop()+", "}if(e!==""){this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,""))}else{this.$elementFilestyle.find(":text").val("")}},constructor:function(){var t=this,n="",r=this.$element.attr("id"),i=[];if(r===""||!r){r="filestyle-"+e(".bootstrap-filestyle").length;this.$element.attr({id:r})}if(this.options.buttonBefore){n='<label for="'+r+'" style="margin-right: 4px;" class="'+this.options.classButton+'" '+(this.options.disabled?'disabled="true"':"")+">"+this.htmlIcon()+"<span>"+this.options.buttonText+"</span>"+"</label>"+this.htmlInput()}else{n=this.htmlInput()+'<label for="'+r+'" class="'+this.options.classButton+'" '+(this.options.disabled?'disabled="true"':"")+"> "+this.htmlIcon()+"<span>"+this.options.buttonText+"</span>"+"</label>"}this.$elementFilestyle=e('<div class="bootstrap-filestyle" style="display: inline-block;">'+n+"</div>");var s=this.$elementFilestyle.find("label");var o=s.parent();o.attr("tabindex","0").keypress(function(e){if(e.keyCode===13||e.charCode===32){s.click()}});this.$element.css({position:"absolute",clip:"rect(0,0,0,0)"}).attr("tabindex","-1").after(this.$elementFilestyle);if(this.options.disabled){this.$element.attr("disabled","true")}this.$element.change(function(){var e="";if(this.files===undefined){i[0]={name:this.value}}else{i=this.files}for(var n=0;n<i.length;n++){e+=i[n].name.split("\\").pop()+", "}if(e!==""){t.$elementFilestyle.find(":text").val(e.replace(/\, $/g,""))}else{t.$elementFilestyle.find(":text").val("")}if(true){var r;if(t.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)!==-1){r='style="background-color: #fff !important; color: #000;"'}else{r='style="background-color: #000 !important; color: #fff;"'}if(t.$elementFilestyle.find(".quant-files-filestyle").length==0){t.$elementFilestyle.find("label").append(" <span "+r+' class="quant-files-filestyle badge">'+i.length+"</span>")}else if(i.length==0){t.$elementFilestyle.find(".quant-files-filestyle").remove()}else{t.$elementFilestyle.find(".quant-files-filestyle").html(i.length)}}else{t.$elementFilestyle.find(".quant-files-filestyle").remove()}});if(window.navigator.userAgent.search(/firefox/i)>-1){this.$elementFilestyle.find("label").click(function(){t.$element.click();return false})}}};var n=e.fn.filestyle;e.fn.filestyle=function(n,r){var i="",s=this.each(function(){if(e(this).attr("type")==="file"){var s=e(this),o=s.data("filestyle"),u=e.extend({},e.fn.filestyle.defaults,n,typeof n==="object"&&n);if(!o){s.data("filestyle",o=new t(this,u));o.constructor()}if(typeof n==="string"){i=o[n](r)}}});if(typeof i!==undefined){return i}else{return s}};e.fn.filestyle.defaults={buttonText:"Choose file",input:true,icon:true,buttonBefore:false,disabled:false,classButton:"btn btn-default",classInput:"input-large",classIcon:"icon-folder-open"};e.fn.filestyle.noConflict=function(){e.fn.filestyle=n;return this};e(function(){e(".filestyle").each(function(){var t=e(this),n={input:t.attr("data-input")==="false"?false:true,icon:t.attr("data-icon")==="false"?false:true,buttonBefore:t.attr("data-buttonBefore")==="true"?true:false,disabled:t.attr("data-disabled")==="true"?true:false,buttonText:t.attr("data-buttonText"),classButton:t.attr("data-classButton"),classInput:t.attr("data-classInput"),classIcon:t.attr("data-classIcon")};t.filestyle(n)})})})(window.jQuery)