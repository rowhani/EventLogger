{% extends 'base.html' %}

{% block head %}
	<link rel="stylesheet" href="{{ STATIC_URL }}libs/bootstrap-datatables/css/dataTables.bootstrap.css">	
{% endblock %}

{% block title %}رویداد ها{% endblock %}

{% block header %}رویداد ها{% endblock %}

{% block content %}
    <a class="btn btn-primary pull-right" href="{% url 'add_event' %}" style="margin-bottom: 5px"><span class="glyphicon glyphicon-plus"></span> ایجاد رویداد</a>
	<table id="events" class="table table-striped table-bordered table-condensed pull-left" cellspacing="0" width="100%">
		<thead>
            <tr>
				<th style="width: 15%!important"></th>
                <th style="width: 25%">موضوع</th>
                <th style="width: 15%">تاریخ</th>
                <th style="width: 20%">مکان</th>
				<th style="width: 25%">اشخاص مرتبط</th>
            </tr>
        </thead>
	</table>
{% endblock %}

{% block scripts %}
	<script src="{{ STATIC_URL }}libs/bootstrap-datatables/js/jquery.dataTables.min.js"></script>	
	<script src="{{ STATIC_URL }}libs/bootstrap-datatables/js/dataTables.bootstrap.js"></script>	
	<script>
		$(document).ready(function() {
			var dt = $('#events').dataTable({
				"sDom": '<"top"f>rt<"clearfix"><"bottom"<"pull-left"p><"pull-right"i>><"clear">',
				"iDisplayLength": 20,
				"oLanguage": {
					"sInfo": "نمایش صفحه _PAGE_ از _PAGES_",
					"sEmptyTable": "هیچ رویدادی ثبت نشده است",
					"sInfoEmpty": "نمایش 0 از 0 رویداد",
					"sInfoFiltered": "(فیلتر شده از مجموع _MAX_ رویداد)",
					"sLoadingRecords": "در حال بارگذاری...",
					"sProcessing": "در حال پردازش...",
					"sSearch": "جستجوی سریع: ",
					"sZeroRecords": "هیچ رویدادی یافت نشد",
					"oPaginate": {
						"sNext": "بعدی",
						"sFirst": "اول",
						"sPrevious": "قبلی",
						"sLast": "آخر"						
					}
				},
				"aoColumns": [
					{ "bSortable": false },
					null,
					null,
					null,
					{ "bSortable": false }
				],
				"order": [[ 2, "desc" ]],
				"bProcessing": true,
				"bServerSide": true,
				"sAjaxSource": "{% url 'list_event_json' %}"
			});	
			$("#events_filter input[type=search]").attr("name", "sSearch");	
			$('.event-ended', dt).livequery(function() {
				$(this).addClass("label label-warning").text('پایان یافته');
			});
		});
	</script>
{% endblock %}